<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="./output.css" rel="stylesheet">
</head>

<body>
    <h1 class="text-3xl font-bold  text-center text-green-600 py-8 ">
        Our Products
    </h1>

    <div class="max-w-[1320px] mx-auto grid  grid-cols-[25%_auto] gap-[40px] py-5">
        <div class="bg-gray-100">

            <div class="p-6">
                <h2 class="mb-2 text-xl font-semibold text-gray-900 dark:text-white"> Category:</h2>
                <ul class="max-w-md space-y-1 text-gray-500 list-inside dark:text-gray-400 " id="CategoryUl">
                   
                </ul>
            </div>
        </div>
        <div>

            <h3 class="text-gray-600 text-2xl font-medium">More Products</h3>
            <div class="grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 mt-6" id="productList">
               
                
            </div>
        </div>
    </div>
    </div>
</body>

<script>

    let CategoryUlElement=document.querySelector("#CategoryUl")
    let productList=document.querySelector("#productList")
    let getCategory=async ()=>{
        let fetchData=await fetch(`https://dummyjson.com/products/category-list`)
        let catData= await fetchData.json();
        let items=''
        catData.forEach(element => {
            items+=`<li onclick="getProduct('${element}')" class="text-[16px] cursor-pointer font-bold ">${element}</li>`
        });

        CategoryUlElement.innerHTML=items
    }

    let loadingDiv=`<div class="border border-blue-300 shadow rounded-md p-4 max-w-sm w-full mx-auto">
                    <div class="animate-pulse flex space-x-4">
                      <div class="rounded-full bg-slate-200 h-10 w-10"></div>
                      <div class="flex-1 space-y-6 py-1">
                        <div class="h-2 bg-slate-200 rounded"></div>
                        <div class="space-y-3">
                          <div class="grid grid-cols-3 gap-4">
                            <div class="h-2 bg-slate-200 rounded col-span-2"></div>
                            <div class="h-2 bg-slate-200 rounded col-span-1"></div>
                          </div>
                          <div class="h-2 bg-slate-200 rounded"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="border border-blue-300 shadow rounded-md p-4 max-w-sm w-full mx-auto">
                    <div class="animate-pulse flex space-x-4">
                      <div class="rounded-full bg-slate-200 h-10 w-10"></div>
                      <div class="flex-1 space-y-6 py-1">
                        <div class="h-2 bg-slate-200 rounded"></div>
                        <div class="space-y-3">
                          <div class="grid grid-cols-3 gap-4">
                            <div class="h-2 bg-slate-200 rounded col-span-2"></div>
                            <div class="h-2 bg-slate-200 rounded col-span-1"></div>
                          </div>
                          <div class="h-2 bg-slate-200 rounded"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="border border-blue-300 shadow rounded-md p-4 max-w-sm w-full mx-auto">
                    <div class="animate-pulse flex space-x-4">
                      <div class="rounded-full bg-slate-200 h-10 w-10"></div>
                      <div class="flex-1 space-y-6 py-1">
                        <div class="h-2 bg-slate-200 rounded"></div>
                        <div class="space-y-3">
                          <div class="grid grid-cols-3 gap-4">
                            <div class="h-2 bg-slate-200 rounded col-span-2"></div>
                            <div class="h-2 bg-slate-200 rounded col-span-1"></div>
                          </div>
                          <div class="h-2 bg-slate-200 rounded"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="border border-blue-300 shadow rounded-md p-4 max-w-sm w-full mx-auto">
                    <div class="animate-pulse flex space-x-4">
                      <div class="rounded-full bg-slate-200 h-10 w-10"></div>
                      <div class="flex-1 space-y-6 py-1">
                        <div class="h-2 bg-slate-200 rounded"></div>
                        <div class="space-y-3">
                          <div class="grid grid-cols-3 gap-4">
                            <div class="h-2 bg-slate-200 rounded col-span-2"></div>
                            <div class="h-2 bg-slate-200 rounded col-span-1"></div>
                          </div>
                          <div class="h-2 bg-slate-200 rounded"></div>
                        </div>
                      </div>
                    </div>
                  </div>`


    let getProduct=(catname='')=>{

        productList.innerHTML=loadingDiv //Loading..
        
        let apiUrl;
        if(catname===''){
            apiUrl=`https://dummyjson.com/products`
        }
        else{
            apiUrl=`https://dummyjson.com/products/category/${catname}` 
        }
       fetch(apiUrl)
       .then((res)=>res.json())
       .then((finalRes)=>{
            let pItems=''
            let {products}=finalRes;
            products.forEach((items)=>{
               let {title,price,thumbnail}=items

               pItems+=` <div class=" rounded-md shadow-md overflow-hidden">
                    <div class="flex items-end justify-end h-56 w-full bg-cover"
                        style="background-image: url('${thumbnail}')">
                        <button
                            class="p-2 rounded-full bg-blue-600 text-white mx-5 -mb-4 hover:bg-blue-500 focus:outline-none focus:bg-blue-500">
                            <svg class="h-5 w-5" fill="none" stroke-linecap="round" stroke-linejoin="round"
                                stroke-width="2" viewBox="0 0 24 24" stroke="currentColor">
                                <path
                                    d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z">
                                </path>
                            </svg>
                        </button>
                    </div>
                    <div class="px-5 py-3">
                        <h3 class="text-gray-700 uppercase">${title}</h3>
                        <span class="text-gray-500 mt-2">$${price}</span>
                    </div>
                </div>`
            })

            productList.innerHTML=pItems //Product..
       })
    }

    getProduct();

    getCategory()
</script>
</html>